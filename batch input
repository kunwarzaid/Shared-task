# Track differential stabilization
if len(ddx_history) >= 3:
    last_3 = ddx_history[-3:]
    top_dxs = [ddx[0] for ddx in last_3 if ddx]
    if len(top_dxs) >= 3 and len(set(top_dxs)) == 1:
        stable_dx = top_dxs[0]
        log_trace(f"[AUTO-CONCLUDE] Stable top diagnosis for 3 turns â†’ {stable_dx}", "INFO")
        dr_text = f"DIAGNOSIS READY: {stable_dx}"
        diagnosis = stable_dx
        break
